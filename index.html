<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hardware Configuration Tool</title>

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans KR"', 'sans-serif'],
                    },
                    colors: {
                        slate: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="./src/style.css">

    <!-- Libraries (CDN) -->
    <script src="https://unpkg.com/konva@9/konva.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/pptxgenjs@3.12.0/dist/pptxgen.bundle.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
</head>

<body
    class="bg-slate-50 h-screen flex flex-col overflow-hidden text-slate-800 antialiased selection:bg-slate-200 selection:text-slate-900 fade-in">

    <!-- Navigation -->
    <nav
        class="fixed w-full bg-white/80 backdrop-blur-sm z-50 border-b border-slate-100 h-16 flex items-center justify-between px-6">
        <div class="flex items-center gap-6">
            <a href="#" class="text-lg font-bold tracking-tight text-slate-900 flex items-center gap-2">
                <i data-lucide="box" class="w-5 h-5"></i>
                HARDWARE.CONFIG
            </a>
            <div id="auth-status"
                class="text-xs text-slate-400 font-medium bg-slate-50 px-2 py-1 rounded-full border border-slate-100">
                Connecting...
            </div>
        </div>

        <div class="flex items-center gap-4">
            <!-- View Switcher -->
            <div class="flex bg-slate-100 rounded-lg p-1 gap-1">
                <button id="btn-view-logical"
                    class="px-4 py-1.5 text-sm rounded-md bg-white shadow-sm text-slate-900 font-medium transition-all">Logical</button>
                <button id="btn-view-physical"
                    class="px-4 py-1.5 text-sm rounded-md text-slate-500 hover:text-slate-900 transition-all">Physical</button>
                <button id="btn-view-request"
                    class="px-4 py-1.5 text-sm rounded-md text-slate-500 hover:text-slate-900 transition-all">Request</button>
            </div>

            <div class="w-px h-6 bg-slate-200 mx-2"></div>

            <!-- Actions -->
            <div id="header-actions" class="flex items-center gap-2">
                <!-- Upload button will be injected here by BackgroundManager -->
                <button id="btn-export-ppt"
                    class="bg-slate-900 hover:bg-slate-800 text-white px-5 py-2 rounded-lg text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2">
                    <i data-lucide="download" class="w-4 h-4"></i>
                    Export PPT
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 relative flex pt-16">
        <!-- Sidebar (BOM / Tools) -->
        <aside
            class="w-72 bg-white border-r border-slate-100 flex flex-col shrink-0 z-40 shadow-sm h-full overflow-hidden">
            <!-- Header Removed -->
            <div class="flex-1 overflow-y-auto p-6 min-h-0 custom-scrollbar">
                <!-- Node Palette Removed: Using Hardware List instead -->

                <!-- Instructions Card -->
                <div class="p-4 bg-slate-50 rounded-xl border border-slate-100">
                    <h3 class="text-xs font-bold text-slate-900 mb-2 flex items-center gap-2">
                        <i data-lucide="info" class="w-3 h-3"></i> Guide
                    </h3>
                    <p class="text-xs text-slate-500 leading-relaxed">
                        Drag components to the canvas.<br>
                        Switch to <strong>Physical</strong> view to arrange on floor plan.<br>
                        Use <strong>Request</strong> mode to add markers.
                    </p>
                </div>

                <!-- Hardware Registry Section -->
                <div class="mt-8 border-t border-slate-100 pt-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="font-bold text-slate-900 text-sm uppercase tracking-wider flex items-center gap-2">
                            <i data-lucide="list" class="w-4 h-4 text-slate-400"></i>
                            Hardware List
                        </h2>
                        <button id="btn-add-hardware"
                            class="text-xs bg-slate-900 text-white px-2 py-1 rounded hover:bg-slate-700 transition-colors">
                            + Add
                        </button>
                    </div>
                    <div id="hardware-list-container" class="space-y-2">
                        <!-- Hardware items will be added here -->
                        <p class="text-xs text-slate-400 italic text-center py-2">No hardware defined.</p>
                    </div>
                </div>

                <!-- Properties Panel (Hidden by default) -->
                <div id="properties-panel" class="hidden mt-8 border-t border-slate-100 pt-6">
                    <h2 class="font-bold text-slate-900 text-sm uppercase tracking-wider flex items-center gap-2 mb-4">
                        <i data-lucide="settings" class="w-4 h-4 text-slate-400"></i>
                        Properties
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs font-medium text-slate-500 mb-1">Type</label>
                            <input type="text" id="prop-type"
                                class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-500"
                                disabled>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-500 mb-1">Name / ID</label>
                            <input type="text" id="prop-id"
                                class="w-full bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900 focus:outline-none focus:border-slate-400 transition-colors">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-500 mb-1">Model</label>
                            <input type="text" id="prop-model"
                                class="w-full bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900 focus:outline-none focus:border-slate-400 transition-colors"
                                placeholder="e.g. CISCO-2960">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-500 mb-1">IP Address</label>
                            <input type="text" id="prop-ip"
                                class="w-full bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900 focus:outline-none focus:border-slate-400 transition-colors"
                                placeholder="192.168.1.1">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-500 mb-1">Description</label>
                            <textarea id="prop-desc" rows="3"
                                class="w-full bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900 focus:outline-none focus:border-slate-400 transition-colors resize-none"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Canvas Area -->
        <div class="flex-1 bg-slate-50 relative overflow-hidden" id="canvas-container">
            <!-- Konva Stage will be attached here -->
        </div>

        <!-- Hardware Add/Edit Modal -->
        <div id="hardware-modal"
            class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center backdrop-blur-sm">
            <div class="bg-white rounded-2xl p-6 w-80 shadow-2xl transform transition-all scale-100">
                <h3 id="modal-title" class="text-lg font-bold text-slate-900 mb-4">Add Hardware</h3>
                <input type="hidden" id="hw-edit-id"> <!-- Hidden ID for editing -->
                <div class="space-y-3">
                    <div>
                        <label class="block text-xs font-medium text-slate-500 mb-1">Category</label>
                        <select id="hw-category"
                            class="w-full bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900">
                            <option value="Device">Device</option>
                            <option value="Cable">Cable</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-slate-500 mb-1">Type</label>
                        <input type="text" id="hw-type"
                            class="w-full bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900"
                            placeholder="e.g. Router, Switch, Cable">
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-slate-500 mb-1">Model Name</label>
                        <input type="text" id="hw-model"
                            class="w-full bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900"
                            placeholder="e.g. CISCO-2960">
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-slate-500 mb-1">Color</label>
                        <div class="flex items-center gap-2">
                            <input type="color" id="hw-color"
                                class="h-8 w-14 bg-white border border-slate-200 rounded cursor-pointer"
                                value="#3b82f6">
                            <span class="text-xs text-slate-400">Select color</span>
                        </div>
                    </div>
                </div>
                <div class="flex gap-2 mt-6">
                    <button id="btn-cancel-hw"
                        class="flex-1 bg-slate-100 text-slate-600 py-2 rounded-lg text-sm font-medium hover:bg-slate-200">Cancel</button>
                    <button id="btn-save-hw"
                        class="flex-1 bg-slate-900 text-white py-2 rounded-lg text-sm font-medium hover:bg-slate-800">Save</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Entry Point -->
    <script type="module" src="./src/main.js"></script>
    <script>
        // Initialize Lucide Icons after load
        window.addEventListener('load', () => {
            lucide.createIcons();
        });
    </script>
</body>

</html>